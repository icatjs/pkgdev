"use strict";function gulpGroup(e,r){var t=new Stream.Transform({objectMode:!0});return e=e||{},r=r||"js",t._transform=function(t,a,n){var s=new StringDecoder("utf8"),c=s.write(t.contents),u=["w","i","d","g","e","t"].join(""),l=e.name+"-wrap";if("js"===r){var i;if(e.tpl)try{i=fs.readFileSync(e.tpl,"utf8")}catch(o){i='<div class="no-tpl"><span class="text-muted">'+e.name+"组件模板打包路径有误，请检查</span></div>"}else i='<div class="no-tpl"><span class="text-muted">'+e.name+"组件模板打包路径为空，请检查</span></div>";i=i.replace(/(\\f|\\n|\\r|\\t|\\v)+/g,"").replace(/\s+/g," "),i=i?"<"+u+' class="'+l+'">'+i+"</"+u+">":i,e.template=i.replace(/(['"])/g,"\\$1"),c=var2value(c,e),t.contents=new Buffer(c,"utf-8")}else c=u+"."+l+"{"+c+"}",t.contents=new Buffer(c,"utf-8");n(null,t)},t}function var2value(e,r){var t=e.match(/<\%\=\w+\%>/g);return t&&t.forEach(function(t){var a=t.replace(/^<\%\=|\%>$/g,""),n=r[a]||"",s=new RegExp("<\\%\\="+a+"\\%>","g");e=e.replace(s,n)}),e}var Stream=require("stream"),Path=require("path"),StringDecoder=require("string_decoder").StringDecoder,fs=require("fs");module.exports=gulpGroup;